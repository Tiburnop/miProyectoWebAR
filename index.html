<!DOCTYPE html>
<html>
<head>
    <title>WebAR Simple - Modelo 3D</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        .arjs-loader { 
            position: absolute; 
            top: 0; left: 0; 
            width: 100%; height: 100%; 
            background: #000; 
            z-index: 9999; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            color: white; 
            font-family: Arial, sans-serif; 
        }
    </style>
</head>
<body>
    <!-- Loader mientras se inicializa -->
    <div class="arjs-loader">
        <div>Cargando cámara... Por favor espera</div>
    </div>

    <!-- Escena AR -->
    <a-scene 
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true;"
        embedded 
        arjs="sourceType: webcam; 
              debugUIEnabled: false;
              detectionMode: mono; 
              trackingMethod: best;">
        
        <!-- Cámara -->
        <a-camera></a-camera>
        
        <!-- Modelo 3D (se posiciona frente a la cámara) -->
        <a-entity 
            id="modelo-3d"
            gltf-model="modelos/Horse.glb"
            scale="0.2 0.2 0.2"
            position="0 0 -1.5"
            rotation="0 180 0"
            animation-mixer="clip: *; loop: repeat"
            visible="false">
        </a-entity>
    </a-scene>

    <script>
        // Ocultar loader cuando la escena esté lista
        document.querySelector('a-scene').addEventListener('loaded', function() {
            document.querySelector('.arjs-loader').style.display = 'none';
            
            // Mostrar el modelo después de 2 segundos (para dar tiempo a inicializar)
            setTimeout(function() {
                const modelo = document.getElementById('modelo-3d');
                modelo.setAttribute('visible', 'true');
                
                // Animación de rotación opcional
                modelo.setAttribute('animation', {
                    property: 'rotation',
                    to: '0 540 0',
                    loop: true,
                    dur: 10000,
                    easing: 'linear'
                });
            }, 2000);
        });
    </script>
</body>
</html>